{% extends 'base.html' %}

{% block title %}Confirmar Exclus√£o de Relat√≥rio{% endblock %}

{% block extra_css %}
<style>
    @media (max-width: 576px) {
        .card { margin-top: 1rem; }
        h2 { font-size: 1.5rem; }
    }
    
    .confirm-section {
        background-color: #fff5f5;
        border-left: 4px solid #dc3545;
        padding: 1.5rem;
        border-radius: 0.5rem;
        margin-bottom: 1.5rem;
    }
    
    .info-item {
        display: flex;
        justify-content: space-between;
        padding: 0.75rem 0;
        border-bottom: 1px solid #e9ecef;
    }
    
    .info-label {
        color: #6c757d;
        font-weight: 500;
    }
    
    .info-value {
        font-weight: 600;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">

    <div class="row justify-content-center mb-4">
        <div class="col-lg-6">

            <div class="d-flex align-items-center mb-4 mt-2">
                <a href="{% url 'relatorios_listar' %}" class="btn btn-outline-secondary btn-sm me-2">
                    <i class="bi bi-arrow-left"></i>
                </a>
                <div>
                    <h2 class="mb-0">‚ö†Ô∏è Confirmar Exclus√£o</h2>
                    <p class="text-muted small mb-0">Esta a√ß√£o n√£o pode ser desfeita</p>
                </div>
            </div>

            <div class="confirm-section">
                <h5 class="text-danger mb-3">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    Voc√™ tem certeza?
                </h5>
                <p class="mb-2">
                    Voc√™ est√° prestes a deletar o seguinte relat√≥rio:
                </p>
            </div>

            <!-- DETALHES DO RELAT√ìRIO -->
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-body">
                    <div class="info-item">
                        <span class="info-label">T√≠tulo</span>
                        <span class="info-value">{{ report.titulo }}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Tipo</span>
                        <span class="info-value">
                            {% if report.tipo == 'FINANCEIRO' %}
                                <span class="badge bg-success">üí∞ Financeiro</span>
                            {% elif report.tipo == 'DESEMPENHO_JOGADOR' %}
                                <span class="badge bg-info">üìä Desempenho</span>
                            {% elif report.tipo == 'RANKING' %}
                                <span class="badge bg-warning text-dark">üèÜ Ranking</span>
                            {% endif %}
                        </span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Per√≠odo</span>
                        <span class="info-value">
                            {{ report.data_inicio|date:"d/m/Y" }} a {{ report.data_fim|date:"d/m/Y" }}
                        </span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Criado em</span>
                        <span class="info-value">{{ report.criado_em|date:"d/m/Y H:i" }}</span>
                    </div>
                    <div class="info-item" style="border-bottom: none;">
                        <span class="info-label">ID</span>
                        <span class="info-value text-monospace small">{{ report.id|truncatechars:16 }}</span>
                    </div>
                </div>
            </div>

            <!-- INFORMA√á√ïES ADICIONAIS -->
            <div class="alert alert-warning mb-4">
                <strong>‚ö†Ô∏è Aten√ß√£o:</strong>
                <ul class="mb-0 mt-2">
                    <li>Todos os dados do relat√≥rio ser√£o permanentemente deletados</li>
                    <li>Voc√™ n√£o poder√° recuperar este relat√≥rio</li>
                    <li>N√£o h√° um "lixo" onde voc√™ possa recuperar arquivos deletados</li>
                </ul>
            </div>

            <!-- FORMUL√ÅRIO DE CONFIRMA√á√ÉO -->
            <form method="POST" class="needs-validation">
                {% csrf_token %}

                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" name="confirm" id="confirm" required>
                    <label class="form-check-label" for="confirm">
                        Sim, entendo que esta a√ß√£o √© permanente e desejo continuar
                    </label>
                    <div class="invalid-feedback">
                        Voc√™ deve confirmar antes de continuar
                    </div>
                </div>

                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-danger btn-lg">
                        <i class="bi bi-trash me-2"></i>Deletar Permanentemente
                    </button>
                    <a href="{% url 'relatorios_listar' %}" class="btn btn-outline-secondary btn-lg">
                        <i class="bi bi-x-circle me-2"></i>Cancelar
                    </a>
                </div>

            </form>

        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form');
        form.addEventListener('submit', function(e) {
            if (!form.checkValidity()) {
                e.preventDefault();
                e.stopPropagation();
            }
            form.classList.add('was-validated');
        });
    });
</script>
{% endblock %}
