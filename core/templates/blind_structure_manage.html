{% extends 'base.html' %}
{% block content %}
<h3>{{ structure.nome }} <small class="text-muted">| Gerenciar Níveis</small></h3>
<div class="row mt-4">
    <div class="col-md-8">
        <table class="table table-hover shadow-sm bg-white">
            <thead class="table-light"><tr><th>Seq</th><th>Blinds</th><th>Ante</th><th>Tempo</th><th></th></tr></thead>
            <tbody>
                {% for level in levels %}
                <tr class="{% if level.is_break %}table-warning{% endif %}">
                    <td>{{ level.ordem }}</td>
                    <td>{% if level.is_break %}INTERVALO{% else %}{{ level.small_blind }}/{{ level.big_blind }}{% endif %}</td>
                    <td>{{ level.ante }}</td>
                    <td>{{ level.tempo_minutos }}m</td>
                    <td class="text-end">
                        <form method="POST" onsubmit="return confirm('Excluir?');">
                            {% csrf_token %}
                            <input type="hidden" name="delete_level" value="1"><input type="hidden" name="level_id" value="{{ level.id }}">
                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="col-md-4">
        <div class="card shadow-sm"><div class="card-header bg-success text-white">Adicionar Nível</div>
            <div class="card-body">
                <form method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="add_level" value="1">
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="is_break" name="is_break">
                        <label class="form-check-label" for="is_break">É Intervalo?</label>
                    </div>
                    <div class="row g-2 mb-2">
                        <div class="col-6"><input type="number" name="small_blind" class="form-control" placeholder="SB" value="0"></div>
                        <div class="col-6"><input type="number" name="big_blind" class="form-control" placeholder="BB" value="0"></div>
                    </div>
                    <div class="mb-2"><input type="number" name="ante" class="form-control" placeholder="Ante" value="0"></div>
                    <div class="mb-3"><label>Tempo (min)</label><input type="number" name="tempo" class="form-control" value="20" required></div>
                    <button class="btn btn-success w-100">Adicionar</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}